<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
<title>FORGOT PASSWORD</title>
</head>
<body>   
<form onsubmit="checkpass()">
    <br/>
	<center>
        <br/><br/><br/>
        <h1> <center> Change Password</h1>
        <br/>
        <label for="newpassword">New Password:</label> 
        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}" name="newPassword" id="newpass" required autofocus><br/>
        <br/>
        <label for="reenterPassword">Re-Enter:</label>
        <input type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}"name="reenter" id="reenterpass" required autofocus><br/>
        <br/>
        <button type="submit"class="btn btn-primary">Submit</button>
        <button type="reset"class="btn btn-primary">Reset</button>
        <br/><br/>
        <label for="validation" id="loginValidation" style="color:red;"></label>
    </center>
</form>
<center>
</center>
<script>
    function checkpass()
    {
        event.preventDefault();
        let newPassword=document.querySelector("#newpass").value;                  
        let reenterPassword=document.querySelector("#reenterpass").value;
        let userName= localStorage.getItem("user");    
        let passwordArray=localStorage.getItem("dob");
        let password=JSON.parse(passwordArray);
        let registerNumberArray=localStorage.getItem("reg");
        let registerNumber=JSON.parse(registerNumberArray);
        if((password.includes(newPassword)==false))
        {
            if(reenterPassword==newPassword)
            {
                let index = registerNumber.indexOf(userName);
                password[index]=newPassword;
                localStorage.setItem("newpass",JSON.stringify(password));
                window.location.href="Signin.html";
            }
            else
            {
                document.getElementById("loginValidation").innerHTML="----Enter the same password----";
            }
        }
        else
        {
            document.getElementById("loginValidation").innerHTML="----Already existing password----";
        }
    }
</script>
</body>
</html>